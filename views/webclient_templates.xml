<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Inject theme configuration into the webclient -->
    <template id="nova_theme_assets" inherit_id="web.layout" name="Theme Nova Layout">
        <xpath expr="//head" position="inside">
            <t t-set="nova_mode" t-value="request.env['ir.config_parameter'].sudo().get_param('nova_theme.mode', 'light')"/>
            <t t-set="nova_accent" t-value="request.env['ir.config_parameter'].sudo().get_param('nova_theme.accent_color', 'indigo')"/>
            <t t-set="nova_animations" t-value="request.env['ir.config_parameter'].sudo().get_param('nova_theme.animations', 'True')"/>
            <t t-set="nova_sidebar" t-value="request.env['ir.config_parameter'].sudo().get_param('nova_theme.sidebar_collapsed', 'False')"/>
            <script type="text/javascript">
                (function() {
                    var d = document.documentElement;
                    d.dataset.novaMode = '<t t-esc="nova_mode"/>';
                    d.dataset.novaAccent = '<t t-esc="nova_accent"/>';
                    d.dataset.novaAnimations = '<t t-esc="nova_animations"/>';
                    d.dataset.novaSidebarCollapsed = '<t t-esc="nova_sidebar"/>';
                    var m = d.dataset.novaMode;
                    if (m === 'dark' || (m === 'auto' &amp;&amp; window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                        d.classList.add('nova-dark');
                    }
                })();
            </script>
        </xpath>
    </template>
</odoo>
