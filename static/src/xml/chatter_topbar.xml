<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <!-- Nova Theme â€” Chatter Topbar: compact toolbar layout -->
    <t t-inherit="mail.ChatterTopbar" t-inherit-mode="extension" owl="1">

        <!-- Replace the entire actions container -->
        <xpath expr="//div[hasclass('o_ChatterTopbar_actions')]" position="replace">
            <div class="nova-chatter-topbar d-flex flex-column w-100">

                <!-- Row 1: Send message | Log note | Activities -->
                <div class="nova-chatter-topbar__primary d-flex align-items-center">
                    <t t-if="chatterTopbar.chatter.threadView">
                        <button class="o_ChatterTopbar_button o_ChatterTopbar_buttonSendMessage nova-tb-btn"
                            type="button"
                            t-att-class="{
                                'o-active': chatterTopbar.chatter.composerView and !chatterTopbar.chatter.composerView.composer.isLog,
                            }"
                            t-att-disabled="!chatterTopbar.chatter.canPostMessage"
                            data-hotkey="m"
                            t-on-click="chatterTopbar.chatter.onClickSendMessage"
                        >
                            <i class="fa fa-paper-plane me-1"/>Send message
                        </button>
                        <span class="nova-tb-sep"/>
                        <button class="o_ChatterTopbar_button o_ChatterTopbar_buttonLogNote nova-tb-btn"
                            type="button"
                            t-att-class="{
                                'o-active': chatterTopbar.chatter.composerView and chatterTopbar.chatter.composerView.composer.isLog,
                            }"
                            t-att-disabled="!chatterTopbar.chatter.canPostMessage"
                            t-on-click="chatterTopbar.chatter.onClickLogNote"
                            data-hotkey="shift+m"
                        >
                            <i class="fa fa-pencil me-1"/>Log note
                        </button>
                    </t>
                    <t t-if="chatterTopbar.chatter.hasActivities">
                        <span class="nova-tb-sep"/>
                        <button class="o_ChatterTopbar_button o_ChatterTopbar_buttonScheduleActivity nova-tb-btn"
                            type="button"
                            t-att-disabled="!chatterTopbar.chatter.isTemporary and !chatterTopbar.chatter.hasWriteAccess"
                            t-on-click="chatterTopbar.chatter.onClickScheduleActivity"
                            data-hotkey="shift+a"
                        >
                            <i class="fa fa-clock-o me-1"/>Activities
                        </button>
                    </t>
                </div>

                <!-- Row 2: Attachments | Followers | Follow -->
                <div class="nova-chatter-topbar__secondary d-flex align-items-center">
                    <button t-if="chatterTopbar.chatter.thread.allAttachments.length === 0"
                        class="o_ChatterTopbar_button o_ChatterTopbar_buttonAddAttachments nova-tb-btn"
                        type="button"
                        t-att-disabled="!chatterTopbar.chatter.isTemporary and !chatterTopbar.chatter.hasWriteAccess"
                        t-on-click="chatterTopbar.chatter.onClickButtonAddAttachments"
                    >
                        <i class="fa fa-paperclip" role="img" aria-label="Attachments"/>
                        <t t-if="chatterTopbar.chatter.isShowingAttachmentsLoading">
                            <i class="o_ChatterTopbar_buttonAttachmentsCountLoader fa fa-circle-o-notch fa-spin ms-1"/>
                        </t>
                    </button>
                    <button t-if="chatterTopbar.chatter.thread.allAttachments.length > 0"
                        class="o_ChatterTopbar_button o_ChatterTopbar_buttonToggleAttachments nova-tb-btn"
                        type="button"
                        t-att-disabled="!chatterTopbar.chatter.isTemporary and !chatterTopbar.chatter.hasReadAccess"
                        t-att-aria-expanded="chatterTopbar.chatter.attachmentBoxView ? 'true' : 'false'"
                        t-on-click="chatterTopbar.chatter.onClickButtonToggleAttachments"
                    >
                        <i class="fa fa-paperclip" role="img" aria-label="Attachments"/>
                        <t t-if="!chatterTopbar.chatter.isShowingAttachmentsLoading">
                            <span class="o_ChatterTopbar_buttonCount o_ChatterTopbar_buttonAttachmentsCount ms-1" t-esc="chatterTopbar.attachmentButtonText"/>
                        </t>
                        <t t-if="chatterTopbar.chatter.isShowingAttachmentsLoading">
                            <i class="o_ChatterTopbar_buttonAttachmentsCountLoader fa fa-circle-o-notch fa-spin ms-1"/>
                        </t>
                    </button>
                    <t t-if="chatterTopbar.chatter.hasFollowers and chatterTopbar.chatter.thread">
                        <span class="nova-tb-sep"/>
                        <FollowerListMenu
                            className="'o_ChatterTopbar_followerListMenu'"
                            record="chatterTopbar.chatter.followerListMenuView"
                        />
                        <t t-if="chatterTopbar.chatter.followButtonView">
                            <span class="nova-tb-sep"/>
                            <FollowButton
                                className="'o_ChatterTopbar_followButton'"
                                record="chatterTopbar.chatter.followButtonView"
                            />
                        </t>
                    </t>
                </div>

            </div>
        </xpath>

    </t>

</templates>
